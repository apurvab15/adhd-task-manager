(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,76026,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(20357),a=e.i(22016),l=e.i(2120),n=e.i(61803),o=e.i(63578),i=e.i(53193),d=e.i(6223),c=e.i(819);let x="adhd-task-lists",u="adhd-today-tasks";function m(){let[e,m]=(0,r.useState)(!1),[h,f]=(0,r.useState)(!1),[g,p]=(0,r.useState)(!1),[b,F]=(0,r.useState)([]),[w,v]=(0,r.useState)(""),[k,j]=(0,r.useState)([]),[N,y]=(0,r.useState)([]),[C,S]=(0,r.useState)(!1),[E,T]=(0,r.useState)(""),A=(0,r.useRef)(null),M=(0,r.useRef)(1),L=(0,r.useRef)(1),R=(0,r.useRef)(null),O=(0,r.useRef)(!1),{breakTask:$,isBreaking:P,error:B}=(0,s.useTaskBreaker)("inattentive"),I=d.periwinklePalette;(0,r.useEffect)(()=>{R.current=new c.default},[]),(0,r.useEffect)(()=>{try{let e=window.localStorage.getItem(u);if(e){let t=JSON.parse(e),r=new Date().toDateString();if(t.date===r){let e=t.tasks||[];j(e),e.length>0&&(M.current=Math.max(...e.map(e=>e.id))+1)}else j([]),window.localStorage.setItem(u,JSON.stringify({date:r,tasks:[]}))}let t=window.localStorage.getItem(x);if(t){let e=JSON.parse(t);if(y(e||[]),e&&e.length>0){L.current=Math.max(...e.map(e=>e.id))+1;let t=e.flatMap(e=>e.tasks);if(t.length>0){let e=Math.max(...t.map(e=>e.id));M.current=Math.max(M.current,e+1)}}}}catch(e){console.error("Error loading data:",e)}S(!0)},[]),(0,r.useEffect)(()=>{let e=()=>{try{let e=window.localStorage.getItem(x);if(e){let t=JSON.parse(e);y(t||[])}}catch(e){console.error("Error refreshing task lists:",e)}};return window.addEventListener("taskCompleted",e),window.addEventListener("storage",e),()=>{window.removeEventListener("taskCompleted",e),window.removeEventListener("storage",e)}},[]),(0,r.useEffect)(()=>{if(!C)return;let e=new Date().toDateString();window.localStorage.setItem(u,JSON.stringify({date:e,tasks:k}))},[k,C]),(0,r.useEffect)(()=>{C&&window.localStorage.setItem(x,JSON.stringify(N))},[N,C]);let Z=e=>{j(t=>{let r=t.find(t=>t.id===e);if(!r)return t;let s=!r.done;return s&&!r.done?(0,l.awardXPForTask)():!s&&r.done&&(0,l.revokeXPForTaskCompletion)(),window.dispatchEvent(new CustomEvent("taskCompleted")),t.map(t=>t.id===e?{...t,done:s}:t)})},D=e=>{let t=e.trim();if(!t)return;let r={id:M.current++,text:t,done:!1};j(e=>[...e,r]),T(""),A.current?.focus()},H=async e=>{let t=e.trim();if(t){v(t),p(!0);try{let e=await $(t,"inattentive");if(console.log("inattentive page: subTasks",e),e&&0===e.length){p(!1),alert("No sub-tasks were generated. Please try again.");return}F(e||[])}catch(e){console.error("Error breaking down task:",e),p(!1),alert(e instanceof Error?e.message:"Failed to break down task. Please try again.")}}},J=()=>{F([]),v(""),p(!1),T(""),A.current?.focus()},z=new Set(k.map(e=>e.id)),K=k.filter(e=>e.done).length,U=k.length,X=U>0&&K===U,V=k.find(e=>!e.done);return(0,r.useEffect)(()=>{X&&R.current&&!O.current?(O.current=!0,R.current.addConfetti({emojis:["ðŸŽ‰","âœ¨","ðŸŒŸ","ðŸ’«","ðŸŽŠ"],emojiSize:100,confettiNumber:50})):X||(O.current=!1)},[X]),(0,t.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,t.jsx)("nav",{className:"border-b border-[#7085FF]/10 bg-white/90 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:"flex items-center justify-between px-8 py-4",children:[(0,t.jsx)(a.default,{href:"/inattentive",className:"text-[#7085FF] transition-colors hover:text-[#5A75FF]",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"h-6 w-6",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M9.293 2.293a1 1 0 0 1 1.414 0l7 7A1 1 0 0 1 17 11h-1v6a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-6H3a1 1 0 0 1-.707-1.707l7-7Z",clipRule:"evenodd"})})}),(0,t.jsxs)("div",{className:"flex items-center gap-6",children:[(0,t.jsx)(a.default,{href:"/tasks?mode=inattentive",className:"text-lg font-semibold border-2 border-[#7085FF] text-[#7085FF] px-6 py-2 rounded-xl transition-colors hover:bg-[#7085FF]/10",children:"Tasks"}),(0,t.jsx)("button",{onClick:()=>m(!0),className:`rounded-lg ${I.accent} px-6 py-2 text-lg font-medium text-white transition-colors ${I.accentHover}`,children:"Focus"})]})]})}),(0,t.jsxs)("main",{className:"flex h-[calc(100vh-81px)] gap-8 p-8",children:[(0,t.jsxs)("div",{className:"flex-1 rounded-3xl border-2 border-[#7085FF]/20 bg-white p-12 flex flex-col justify-center",children:[(0,t.jsx)("h2",{className:"text-4xl font-bold text-gray-900 mb-8",children:"Next Step"}),V?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-start gap-6",children:[(0,t.jsx)("input",{type:"checkbox",checked:V.done,onChange:()=>Z(V.id),className:"h-8 w-8 cursor-pointer rounded border-2 border-[#7085FF]/60 bg-white text-[#7085FF] focus:ring-2 focus:ring-[#7085FF]/30 focus:border-[#7085FF] checked:bg-[#7085FF] checked:border-[#7085FF] mt-1 transition-colors"}),(0,t.jsx)("p",{className:"text-3xl font-medium text-gray-900 leading-relaxed flex-1",children:V.text})]}),(0,t.jsx)("div",{className:"flex flex-col gap-4 mt-8",children:(0,t.jsx)("button",{onClick:()=>m(!0),className:`text-xl font-semibold ${I.accent} px-6 py-3 text-white rounded-xl transition-colors ${I.accentHover}`,children:"Focus Mode"})})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("p",{className:"text-3xl font-medium text-gray-400 leading-relaxed",children:0===k.length?"Lets get started!":"All tasks completed! ðŸŽ‰"}),(0,t.jsxs)("div",{className:"flex flex-col gap-4 mt-6",children:[(0,t.jsx)("button",{onClick:()=>m(!0),className:`text-xl font-semibold ${I.accent} px-6 py-3 text-white rounded-xl transition-colors ${I.accentHover}`,children:"Focus Mode"}),(0,t.jsx)("button",{onClick:()=>f(!0),className:"text-xl font-semibold border-2 border-[#7085FF] text-[#7085FF] px-6 py-3 rounded-xl transition-colors hover:bg-[#7085FF]/10",children:"Add Tasks"})]})]})]}),(0,t.jsxs)("div",{className:"flex-1 rounded-3xl border-2 border-[#7085FF]/20 bg-white p-12 flex flex-col",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,t.jsx)("h2",{className:"text-4xl font-bold text-gray-900",children:"Today's List"})}),(0,t.jsxs)("p",{className:"text-2xl text-gray-700",children:[K," of ",U," completed"]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===k.length?(0,t.jsx)("div",{onClick:()=>A.current?.focus(),className:"flex h-full items-center justify-center rounded-xl border-2 border-dashed border-[#7085FF]/20 bg-[#7085FF]/5 p-12 text-center cursor-pointer transition-colors hover:bg-[#7085FF]/10",children:(0,t.jsx)("p",{className:"text-2xl text-gray-700",children:"Let's add some tasks!"})}):(0,t.jsx)("ul",{className:"space-y-4",children:k.map(e=>(0,t.jsxs)("li",{className:`flex items-start gap-4 rounded-xl border-2 p-4 cursor-pointer transition-colors ${e.done?"border-[#7085FF]/40 bg-[#7085FF]/5":"border-[#7085FF] bg-white hover:bg-[#7085FF]/10"}`,children:[(0,t.jsx)("input",{type:"checkbox",checked:e.done,onChange:()=>Z(e.id),className:"h-8 w-8 cursor-pointer rounded border-2 border-[#7085FF]/60 bg-white text-[#7085FF] focus:ring-2 focus:ring-[#7085FF]/30 focus:border-[#7085FF] checked:bg-[#7085FF] checked:border-[#7085FF] mt-1 transition-colors"}),(0,t.jsx)("div",{className:"flex-1 min-w-0",children:(0,t.jsx)("p",{className:`text-2xl leading-relaxed ${e.done?"line-through text-gray-400":"text-gray-900"}`,children:e.text})}),(0,t.jsx)("button",{onClick:()=>{var t;return t=e.id,void j(e=>{{let r=e.find(e=>e.id===t);r&&!r.done&&((0,l.penalizeXPForUncompletedTask)(),window.dispatchEvent(new CustomEvent("taskCompleted")))}return e.filter(e=>e.id!==t)})},className:"flex-shrink-0 rounded-lg p-2 text-gray-400 transition-colors hover:text-red-500","aria-label":"Remove task",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"h-6 w-6",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M8.75 1A2.75 2.75 0 0 0 6 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 1 0 .23 1.482l.149-.022.841 10.518A2.75 2.75 0 0 0 7.596 19h4.807a2.75 2.75 0 0 0 2.742-2.53l.841-10.52.149.023a.75.75 0 0 0 .23-1.482A41.03 41.03 0 0 0 14 4.193V3.75A2.75 2.75 0 0 0 11.25 1h-2.5ZM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4ZM8.58 7.72a.75.75 0 0 0-1.5.06l.3 7.5a.75.75 0 1 0 1.5-.06l-.3-7.5Zm4.34.06a.75.75 0 1 0-1.5-.06l-.3 7.5a.75.75 0 1 0 1.5.06l.3-7.5Z",clipRule:"evenodd"})})})]},e.id))})}),(0,t.jsxs)("div",{className:"mt-6 border-t border-[#7085FF]/10 pt-4 flex items-center gap-2",children:[(0,t.jsx)("textarea",{ref:A,value:E,onChange:e=>T(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),D(E))},placeholder:"Add task...",className:"flex-1 rounded-lg border border-[#7085FF]/20 bg-white px-3 py-2 text-base text-gray-900 placeholder:text-gray-400 focus:border-[#7085FF] focus:outline-none"}),(0,t.jsx)("button",{onClick:()=>D(E),className:`rounded-lg ${I.accent} px-4 py-2 text-base font-medium text-white transition ${I.accentHover}`,children:"Add"}),(0,t.jsx)("button",{onClick:()=>H(E),disabled:P,title:P?"Breaking down task...":"Break down task",className:"text-base font-medium border-2 border-[#7085FF] text-[#7085FF] px-4 py-2 rounded-lg transition-colors hover:bg-[#7085FF]/10",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"size-5",children:(0,t.jsx)("path",{d:"M15.98 1.804a1 1 0 0 0-1.96 0l-.24 1.192a1 1 0 0 1-.784.785l-1.192.238a1 1 0 0 0 0 1.962l1.192.238a1 1 0 0 1 .785.785l.238 1.192a1 1 0 0 0 1.962 0l.238-1.192a1 1 0 0 1 .785-.785l1.192-.238a1 1 0 0 0 0-1.962l-1.192-.238a1 1 0 0 1-.785-.785l-.238-1.192ZM6.949 5.684a1 1 0 0 0-1.898 0l-.683 2.051a1 1 0 0 1-.633.633l-2.051.683a1 1 0 0 0 0 1.898l2.051.684a1 1 0 0 1 .633.632l.683 2.051a1 1 0 0 0 1.898 0l.683-2.051a1 1 0 0 1 .633-.633l2.051-.683a1 1 0 0 0 0-1.898l-2.051-.683a1 1 0 0 1-.633-.633L6.95 5.684ZM13.949 13.684a1 1 0 0 0-1.898 0l-.184.551a1 1 0 0 1-.632.633l-.551.183a1 1 0 0 0 0 1.898l.551.183a1 1 0 0 1 .633.633l.183.551a1 1 0 0 0 1.898 0l.184-.551a1 1 0 0 1 .632-.633l.551-.183a1 1 0 0 0 0-1.898l-.551-.184a1 1 0 0 1-.633-.632l-.183-.551Z"})})})]})]})]}),(0,t.jsx)(n.default,{isOpen:e,onClose:()=>m(!1),mode:"inattentive"}),(0,t.jsx)(o.default,{isOpen:h,onClose:()=>f(!1),onAddTasks:e=>{j(t=>{let r=new Set(t.map(e=>e.id));return[...e.filter(e=>!r.has(e.id)),...t]})},existingTaskIds:z,mode:"inattentive"},h?"open":"closed"),(0,t.jsx)(i.default,{isOpen:g,isLoading:P,tasks:b,originalTask:w,onClose:()=>{P||J()},onDiscard:J,onAdd:e=>{if(0===e.length)return;let t=e.filter(e=>""!==e.text.trim());if(0===t.length)return;let r=t.map(e=>({id:M.current++,text:e.text.trim(),done:!1})),s=w.slice(0,30)+(w.length>30?"...":""),a={id:L.current++,name:s,tasks:r.map(e=>({id:e.id,text:e.text,done:!1}))};y(e=>[...e,a]);let l=r.map(e=>({...e,sourceListId:a.id,sourceListName:a.name}));j(e=>{let t=new Set(e.map(e=>e.text.toLowerCase().trim()));return[...l.filter(e=>!t.has(e.text.toLowerCase().trim())),...e]}),F([]),v(""),p(!1),T(""),A.current?.focus()},colorPalette:I})]})}e.s(["default",()=>m])}]);